<!DOCTYPE html>
<html lang="en">
<head>
    <title>AUC Entertainment - Cart</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
    
    <!-- FontAwesome (Older Version) -->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
    
    <!-- Fancybox CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen">

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script src="https://js.stripe.com/v3/"></script>


    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 20px;
        }
        .container {
            width: 80%;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h2 {
            text-align: center;
            color: #333;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #2D7B30;
            color: white;
        }
        .cart-total {
            text-align: right;
            font-size: 18px;
            margin-bottom: 20px;
        }
        .checkout-form {
            background: #f4f4f4;
            padding: 15px;
            border-radius: 8px;
        }
        .checkout-form input {
            width: 100%;
            padding: 10px;
            margin: 8px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .checkout-form button {
            width: 100%;
            padding: 10px;
            background: #FE9801;
            border: none;
            color: white;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
        }
        .checkout-form button:hover {
            background: #e07d00;
        }
        .input-group .btn {
  height: auto; /* Ensures the button matches input's height */
}

/* The hero image */
.hero-image {
  /* Use "linear-gradient" to add a darken background effect to the image (photographer.jpg). This will make the text easier to read */
  background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("img/studio.jpg");

  /* Set a specific height */
  height: 50%;

  /* Position and center the image to scale nicely on all screens */
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
  position: relative;
}

/* Place text in the middle of the image */
.hero-text {
  text-align: center;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: white;
}
.carousel-container {
  padding-top: 50px;
  padding-bottom: 50px;
  padding-left: 30px;
  padding-right: 30px;
}

/* Style the Stripe card element */
.StripeElement {
  width: 100%;
  padding: 10px;
  font-size: 16px;
  border: 1px solid #ccc;
  border-radius: 5px;
  background: white;
  transition: border-color 0.3s ease-in-out;
}

/* Placeholder styling */
.StripeElement::placeholder {
  color: #aab7c4;
}

/* When focused */
.StripeElement--focus {
  border-color: #28a745;
  box-shadow: 0 0 5px rgba(40, 167, 69, 0.5);
}

/* When invalid */
.StripeElement--invalid {
  border-color: #fa755a;
  box-shadow: 0 0 5px rgba(250, 117, 90, 0.5);
}

/* When webkit autofill is applied */
.StripeElement:-webkit-autofill {
  background-color: #fefde5 !important;
}

@media (min-width: 768px) {
  .carousel-container {
    padding-left: 120px;
    padding-right: 120px;
  }
}
.cards-wrapper {
  display: flex;
  justify-content: center;
}
.card img {
  max-width: 100%;
  max-height: 100%;
}
.card {
  margin: 0 0.5em;
  box-shadow: 2px 6px 8px 0 rgba(22, 22, 26, 0.18);
  border: none;
  border-radius: 0;
}
.carousel-inner {
  padding: 1em;
}
.carousel-control-prev,
.carousel-control-next {
  background-color: #e1e1e1;
  width: 5vh;
  height: 5vh;
  border-radius: 50%;
  top: 50%;
  transform: translateY(-50%);
}
@media (min-width: 768px) {
  .card img {
    height: 11em;
  }
}
      top: 0;
  }
  .topnav.responsive a {
    float: none;
    display: block;
    text-align: left;
  }
  .topnav.responsive .dropdown {float: none;}
  .topnav.responsive .dropdown-content {position: relative;}
  .topnav.responsive .dropdown .dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

.about-us-wrapper {
  padding: 30px 30px;
}
@media (max-width: 768px) {
  .about-us-wrapper {
    padding: 35px; /* Apply 35px padding on all sides for mobile devices */
  }

  .about-us-title {
    font-size: 1.8rem;
    text-align: center;
  }

  .about-us-content {
    font-size: 1rem;
    line-height: 1.6;
  }

  .about-us-content a {
    font-size: 1.1rem;
  }

  .about-us-content ul {
    padding-left: 20px;
  }

  .about-us-content ul li {
    margin-bottom: 10px;
  }
}

@media (min-width: 768px) {
  .about-us-wrapper {
    padding: 30px 150px;
  }
}

.about-us-title {
  font-weight: bold;
  text-align: center;
  font-size: 2rem;
  margin-bottom: 20px;
}

.about-us-content {
  font-size: 1rem;
  line-height: 1.6;
  margin-bottom: 15px;
  text-align: justify;
}
.partners-wrapper {
  padding: 10px;
}

@media (min-width: 768px) {
  .partners-wrapper {
    padding: 30px 100px;
  }
}

.partners-title {
  font-weight: bold;
  text-align: center;
  font-size: 2rem;
  margin-bottom: 20px;
}

.social-icon {
  width: 24px;
  height: 24px;
}
    </style>
</head>
<body>
 <nav class="navbar navbar-expand-sm bg-dark navbar-dark justify-content-between">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">
<img height="80px" src="img/auclogo.png" alt="logo" />
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="collapsibleNavbar">
      <ul class="navbar-nav">
        <li style="margin-top:10px" class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li style="margin-top:10px" class="nav-item">
          <a class="nav-link" href="/about">About Us</a>
        </li>
        <li style="margin-top:10px" class="nav-item">
          <a class="nav-link" href="/about">Contact Us</a>
        </li> 
        <li style="margin-top:10px" class="nav-item">
          <a class="nav-link" href="/shop">Shop</a>
        </li>  
        <li style="margin-top:10px" class="nav-item">
          <a class="nav-link" href="/video">Video</a>
        </li>  
        <li style="margin-top:10px" class="nav-item">
          <a class="nav-link" href="/video">Promotions</a>
        </li> 
     <li style="margin-top:10px" class="nav-item dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Entertainments</a>
  <ul class="dropdown-menu">
    <li class="dropdown-header">Entertainment Categories</li>
    <li><a class="dropdown-item" href="/entertainment/category/comedy">Comedy Videos</a></li>
    <li><a class="dropdown-item" href="/entertainment/category/aucentertainmentvideos">AUC Entertainment Videos</a></li>
    <li><a class="dropdown-item" href="/entertainment/category/streetshows">Street Shows</a></li>
    <li><a class="dropdown-item" href="/entertainment/category/podcast">Podcasts</a></li>
    <li><a class="dropdown-item" href="/entertainment/category/freestyle">Freestyle</a></li>
    <li><a class="dropdown-item" href="/entertainment/category/news">News</a></li>
  </ul>
</li>
        <li style="margin-top:10px"  class="nav-item dropdown">
          <a class="nav-link
          dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Music</a>
          <ul class="dropdown-menu">
              <li class="dropdown-header">Music Categories</li>
            <li><a class="dropdown-item" href="/aucentertainment">AUC Entertainment Music</a>
            </li>
            <li><a class="dropdown-item" href="/afro">Afro Beat</a>
            </li>
            <li><a class="dropdown-item" href="/asaka">Asaka</a></li>
            <li>
                <a class="dropdown-item" href="/danehall">Dance Hall
                </a>
            </li>
             <li>
                <a class="dropdown-item" href="/drillmusic">Drill Music
                </a>
            </li>
             <li>
                <a class="dropdown-item" href="/gospel">Gospel Music
                </a>
            </li>
             <li>
                <a class="dropdown-item" href="/hiphop">Hiphop
                </a>
            </li>
             <li   class="nav-item">
                <a class="dropdown-item" href="/hiplife">Hip Life
                </a>
            </li>
          </ul>
        </li>
        <li>
            
          <form class="d-flex align-items-center">
  <div  class="input-group">
    <input type="text" class="form-control" placeholder="Search" aria-label="Search" aria-describedby="search-button">
    <button style="margin-top:10px;" class="btn btn-outline-secondary input-group-text" type="submit" id="search-button">
      <i class="bi bi-search"></i>
    </button>
  </div>
</form>
        </li>
          <li style="margin-top:10px"  class="nav-item dropdown">
          <a class="nav-link
          dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Accounts</a>
          <ul class="dropdown-menu">
              <li class="dropdown-header">UserAccount</li>
            <li><a class="dropdown-item" href="">Login</a></li>
            <li><a class="dropdown-item" href="">Sign Up</a></li>
            <li>
                <a class="dropdown-item" href="">Logout
                </a>
            </li>
            
          </ul>
        </li>
        <li style="margin-top:10px"  class="nav-item">
                    <a class="nav-link" href="#">
                        <i class="fas fa-shopping-cart"></i>
                        Cart 
                        <span class="badge badge-pill badge-primary" id="cart-badge">0</span>
                    </a>
                </li>
        <li>
      </ul>
    </div>
  </div>
</nav>   

<div style="margin-top:50px">
    
</div>

<div class="">
    <h2>Shopping Cart</h2>

    <% if (cart && cart.totalQty > 0) { %>
        <table>
            <thead>
                <tr>
                    <th>Image</th>
                    <th>Product Name</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Subtotal</th>
                </tr>
            </thead>
            <tbody>
                <% cart.items.forEach(item => { %>
                    <tr>
                        <td><img src="<%= item.imageUrl %>" width="50" alt="<%= item.name %>"></td>
                        <td><%= item.title %></td>
                        <td>₦<%= item.price %></td>
                        <td><%= item.quantity %></td>
                        <td>₦<%= (item.price * item.quantity) %></td>
                    </tr>
                <% }); %>
            </tbody>
        </table>

        <div class="cart-total">
            <strong>Total Quantity:</strong> <%= cart.totalQty %> <br>
            <strong>Total Amount:</strong> $<%= cart.totalAmount %>
        </div>

        <h3>Checkout</h3>
        <form action="/payment/charge" method="POST" class="checkout-form">
            <label for="name">Full Name:</label>
            <input type="text" id="name" name="name" required>
            
            
            <label for="email">Email Address:</label>
            <input type="email" id="email" name="email" required>
  
<div id="card-element">
                            <!-- A Stripe Element will be inserted here. -->
                            </div>
            <input type="hidden" name="Amount" value="<%= session.cart.totalAmount %>">
            <input type="hidden" name="totalQty" value="<%= cart.totalQty %>">
            
            <button style="margin-top:40px" type="submit">Proceed to Payment</button>
        </form>
    <% } else { %>
        <p>Your cart is empty.</p>
    <% } %>
</div>

<script>
  let PK = "pk_live_51QuCnW2Ll8ZPNKoHlbjTNCxmZz5xwmHWma2G9MLVLQePpnIbMsXuYDO7OPnx7csrQdmnbVrW1MAV8iehfoLzrVm800hlI5hBb5";
  const stripe = Stripe(PK);
  const elements = stripe.elements();

  // Custom styling
  const style = {
    base: {
      fontSize: '16px',
      color: '#32325d',
      fontFamily: 'Arial, sans-serif',
      '::placeholder': {
        color: '#aab7c4'
      }
    },
    invalid: {
      color: '#fa755a',
      iconColor: '#fa755a'
    }
  };

  const cardElement = elements.create('card', { style });
  cardElement.mount('#card-element');

  const form = document.querySelector('.checkout-form');
  form.addEventListener('submit', async (event) => {
    event.preventDefault();

    const { token, error } = await stripe.createToken(cardElement);

    if (error) {
      document.getElementById('card-errors').textContent = error.message;
    } else {
      const hiddenInput = document.createElement('input');
      hiddenInput.setAttribute('type', 'hidden');
      hiddenInput.setAttribute('name', 'token');
      hiddenInput.setAttribute('value', token.id);

      form.appendChild(hiddenInput);
      form.submit();
    }
  });
</script>